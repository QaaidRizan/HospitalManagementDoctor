<div class="center-container">
  <mat-card class="forgot-password-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon class="forgot-icon">lock_reset</mat-icon>
        Verify OTP
      </mat-card-title>
      <mat-card-subtitle>
        Enter the 6-digit OTP sent to <span class="otp-email">{{ email }}</span>.
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form (ngSubmit)="submit()" class="form">
        <div class="otp-box-group">
          <input *ngFor="let digit of otpDigits; let i = index"
            class="otp-box"
            type="text"
            maxlength="1"
            pattern="[0-9]*"
            inputmode="numeric"
            [(ngModel)]="otp[i]"
            name="otp{{i}}"
            required
            (keyup)="onOtpInput($event, i)"
            autocomplete="one-time-code"
          />
        </div>
        <div *ngIf="otpError" class="otp-error">{{ otpError }}</div>

        <button 
          mat-raised-button 
          color="primary" 
          type="submit" 
          [disabled]="isSubmitting || !isOtpComplete()" 
          class="submit-btn"
          aria-label="Verify OTP">
          <mat-progress-spinner 
            *ngIf="isSubmitting" 
            diameter="16" 
            mode="indeterminate" 
            class="btn-spinner">
          </mat-progress-spinner>
          <span *ngIf="!isSubmitting">Verify</span>
        </button>

        <div class="resend-section">
          Didnâ€™t receive OTP?
          <a class="resend-link" (click)="!resendDisabled && resendOtp()" [class.disabled]="resendDisabled">
            Resend
          </a>
          <span *ngIf="resendDisabled">in {{ timer }}s</span>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
